{"version":3,"sources":["components/Manifest/Manifest.module.css","components/Webcam/Webcam.module.css","components/UI/UI.module.css","components/Canvas/Canvas.module.css","components/Manifest/index.js","components/Webcam/index.js","components/UI/index.js","components/Particles/index.js","components/Canvas/index.js","api/config.js","api/index.js","utils/locations.js","utils/array.js","components/City/useCity.js","components/City/index.js","App.js","reportWebVitals.js","index.js"],"names":["module","exports","Manifest","className","styles","manifest","href","Webcam","videoRef","useRef","useEffect","stream","a","navigator","mediaDevices","getUserMedia","video","audio","newStream","current","srcObject","load","getTracks","forEach","track","stop","webcam","ref","autoPlay","UIContent","city","nextCity","isHome","setShowWebcam","Fragment","onClick","prev","slug","shortName","name","UI","status","copy","Particle","particle","mesh","useFrame","state","delta","time","clock","getElapsedTime","rotation","x","y","position","Math","cos","key","sin","z","args","size","color","opacity","trasparent","Particles","particles","map","ThreeCanvas","useState","setParticles","count","i","push","random","getParticles","canvas","token","n","label","min","getCity","url","fetch","response","json","apiResponse","town","data","pm25","iaqi","v","locations","array","length","j","floor","temp","shuffle","getLocationBySlug","location","find","cache","getCached","setCached","result","useCity","setStatus","setCity","setNextCity","currentLocation","index","findIndex","getNextLocation","City","useRoute","params","showWebcam","Canvas","App","id","base","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2afe99e2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"manifest\":\"Manifest_manifest__dZ4UK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"webcam\":\"Webcam_webcam__5zdMj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copy\":\"UI_copy__3kZZM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"Canvas_canvas__1txVP\"};","import React from \"react\";\nimport { Link } from \"wouter\";\n\nimport styles from \"./Manifest.module.css\";\n\nfunction Manifest() {\n  return (\n    <div className={styles.manifest}>\n      <h1>hell yeah</h1>\n      <Link href=\"/\">back</Link>\n    </div>\n  );\n}\n\nexport default Manifest;\n","import React, { useRef, useEffect } from \"react\";\n\nimport styles from \"./Webcam.module.css\";\n\nfunction Webcam() {\n  const videoRef = useRef();\n  useEffect(() => {\n    let stream;\n    const load = async () => {\n      try {\n        if (navigator.mediaDevices) {\n          const newStream = await navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: false,\n          });\n          stream = newStream;\n          videoRef.current.srcObject = newStream;\n        }\n      } catch (e) {}\n    };\n    load();\n    return () => {\n      if (stream) {\n        stream.getTracks().forEach((track) => {\n          track.stop();\n        });\n      }\n    };\n  }, []);\n  return (\n    <video className={styles.webcam} ref={videoRef} autoPlay={true}></video>\n  );\n}\n\nexport default Webcam;\n","import React from \"react\";\nimport { Link } from \"wouter\";\n\nimport styles from \"./UI.module.css\";\n\nconst UIContent = ({ city, nextCity, isHome, setShowWebcam }) => {\n  return (\n    <React.Fragment>\n      <Link href=\"/manifest\">manifest</Link>\n      <button onClick={() => setShowWebcam((prev) => !prev)}>webcam</button>\n      <Link href={isHome ? `/${nextCity.slug}` : \"/\"}>\n        {isHome ? \"Rest of the world\" : \"Back home\"}\n      </Link>\n      <h1>{city.shortName || city.name}</h1>\n    </React.Fragment>\n  );\n};\n\nfunction UI({ status, city, nextCity, isHome, setShowWebcam }) {\n  return (\n    <div className={styles.copy}>\n      {status === \"loading\" && <div>loader</div>}\n      {status === \"error\" && <div>Ops...something went wrong</div>}\n      {status === \"loaded\" && (\n        <UIContent\n          city={city}\n          nextCity={nextCity}\n          isHome={isHome}\n          setShowWebcam={setShowWebcam}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default UI;\n","import React, { useRef } from \"react\";\nimport { useFrame } from \"react-three-fiber\";\n\nfunction Particle({ particle }) {\n  const mesh = useRef();\n\n  useFrame((state, delta) => {\n    if (!mesh.current) return;\n    const time = state.clock.getElapsedTime();\n    mesh.current.rotation.x = mesh.current.rotation.y += 0.01;\n    mesh.current.position.x += Math.cos(time + particle.key) * 0.01;\n    mesh.current.position.y += Math.sin(time * 1.1 + particle.key) * 0.01;\n    mesh.current.position.z += Math.sin(time * 0.9 + particle.key) * 0.01;\n  });\n\n  return (\n    <mesh position={[particle.x, particle.y, particle.z]} ref={mesh}>\n      <sphereBufferGeometry args={[particle.size, 32, 32]} />\n      <meshStandardMaterial color={\"#34eb3d\"} opacity={0.05} trasparent />\n    </mesh>\n  );\n}\n\nfunction Particles({ particles = [] }) {\n  return (\n    <group>\n      {particles.map(particle => (\n        <Particle key={particle.key} particle={particle} />\n      ))}\n    </group>\n  );\n}\n\nexport default Particles;\n","import React, { useState, useEffect } from \"react\";\nimport { Canvas } from \"react-three-fiber\";\n\nimport Particles from \"../Particles\";\n\nimport styles from \"./Canvas.module.css\";\n\nconst getParticles = (count) => {\n  const particles = [];\n  for (let i = 0; i < count; i += 1) {\n    particles.push({\n      key: i,\n      size: Math.random() * 0.1 + 0.1,\n      x: Math.random() * 10 - 5,\n      y: Math.random() * 10 - 5,\n      z: Math.random() * 10 - 5,\n    });\n  }\n  return particles;\n};\n\nfunction ThreeCanvas({ status, city }) {\n  const [particles, setParticles] = useState([]);\n  useEffect(() => {\n    if (city) setParticles(getParticles(city.particles));\n  }, [city]);\n  return (\n    <div className={styles.canvas}>\n      <Canvas>\n        <ambientLight color=\"#999\" />\n        <pointLight position={[10, 10, 10]} color=\"#999\" />\n        <Particles particles={particles} />\n      </Canvas>\n    </div>\n  );\n}\n\nexport default ThreeCanvas;\n","const token = 'e7416f21983d8cd887bbe33feee25d71fc3a214f';\nexport const hereIpRequest = () =>\n  `https://api.waqi.info/feed/here/?token=${token}`;\nexport const cityIpRequest = (city) =>\n  `https://api.waqi.info/feed/${city}/?token=${token}`;\n","import { hereIpRequest, cityIpRequest } from \"./config\";\n\nconst getParticles = (n) => {\n  let label = \"\";\n  switch (true) {\n    case n < 50:\n      label = \"good\";\n      break;\n    case n < 100:\n      label = \"Moderate\";\n      break;\n    case n < 150:\n      label = \"Unhealthy for sersitive groups\";\n      break;\n    case n < 200:\n      label = \"Unhealthy\";\n      break;\n    case n < 300:\n      label = \"Very unhealthy\";\n      break;\n    case n > 301:\n      label = \"Hazardous\";\n      break;\n    default:\n      label = \"\";\n      break;\n  }\n  return {\n    label,\n    particles: Math.min(n, 400),\n  };\n};\n\nexport const getCity = async (slug) => {\n  const url = slug ? cityIpRequest(slug) : hereIpRequest();\n  const response = await fetch(url);\n  const apiResponse = await response.json();\n\n  const town =\n    apiResponse.data && apiResponse.data.city && apiResponse.data.city.name;\n  const pm25 =\n    apiResponse.data &&\n    apiResponse.data.iaqi &&\n    apiResponse.data.iaqi.pm25 &&\n    apiResponse.data.iaqi.pm25.v;\n\n  return {\n    name: town,\n    ...getParticles(pm25),\n  };\n};\n","import { shuffle } from \"./array\";\n\nexport const locations = [\n  { name: \"Toronto\", slug: \"toronto\" },\n  { name: \"Mumbai\", slug: \"mumbai\" },\n  { name: \"Roma\", slug: \"roma\" },\n  { name: \"Barcelona\", slug: \"barcelona\" },\n  { name: \"Moscow\", slug: \"moscow\" },\n  { name: \"Tatebayashi\", slug: \"tatebayashi\" },\n  { name: \"Shenzhen\", slug: \"shenzhen\" },\n  { name: \"Toronto\", slug: \"toronto\" },\n  { name: \"Foshan\", slug: \"foshan\" },\n  { name: \"İzmir\", slug: \"izmir\" },\n  { name: \"Edirne\", slug: \"edirne\" },\n  { name: \"Lahore\", slug: \"lahore\" },\n  { name: \"Nagoya\", slug: \"nagoya\" },\n  { name: \"Dongguan\", slug: \"dongguan\" },\n  { name: \"Jakarta\", slug: \"jakarta\" },\n  { name: \"Kawasaki\", slug: \"kawasaki\" },\n  { name: \"Attard, Malta\", slug: \"attard\" },\n  { name: \"Córdoba\", slug: \"cordoba\" },\n  { name: \"Salvador\", slug: \"salvador\" },\n  { name: \"Tokyo\", slug: \"tokyo\" },\n  { name: \"Qom\", slug: \"qom\" },\n  { name: \"Berkeley\", slug: \"berkeley\" },\n  { name: \"Munich\", slug: \"munich\" },\n  { name: \"São Paulo\", slug: \"sao-paulo\" },\n  { name: \"Santiago\", slug: \"santiago\" },\n  { name: \"Xiamen\", slug: \"xiamen\" },\n  { name: \"Punta Arenas\", slug: \"punta-arenas\" },\n  { name: \"Kanpur\", slug: \"kanpur\" },\n  { name: \"Hanoi\", slug: \"hanoi\" },\n  { name: \"Columbia\", slug: \"columbia\" },\n  { name: \"Abuja\", slug: \"abuja\" },\n  { name: \"Bangkok\", slug: \"bangkok\" },\n  { name: \"Warburton\", slug: \"warburton\" },\n  { name: \"Blenheim\", slug: \"blenheim\" },\n  { name: \"Calgary\", slug: \"calgary\" },\n  { name: \"Peshawar\", slug: \"peshawar\" },\n  { name: \"Pune\", slug: \"pune\" },\n  { name: \"Hiroshima\", slug: \"hiroshima\" },\n  { name: \"Buenos Aires\", slug: \"buenos-aires\" },\n  { name: \"Beroun\", slug: \"beroun\" },\n  { name: \"Warsaw\", slug: \"warsaw\" },\n  { name: \"Lagos\", slug: \"lagos\" },\n  { name: \"Beroun\", slug: \"beroun\" },\n  { name: \"Cape Town\", slug: \"cape-town\" },\n  { name: \"Chennai\", slug: \"chennai\" },\n  { name: \"Mexico City\", slug: \"mexico City\" },\n  { name: \"Medellin\", slug: \"medellin\" },\n  { name: \"Tangshan\", slug: \"tangshan\" },\n  { name: \"Lanzhou\", slug: \"lanzhou\" },\n  { name: \"Mumbai\", slug: \"mumbai\" },\n  { name: \"Karachi\", slug: \"karachi\" },\n  { name: \"Lucknow\", slug: \"lucknow\" },\n  { name: \"Nanjing\", slug: \"nanjing\" },\n  { name: \"Dubai\", slug: \"dubai\" },\n  { name: \"Göteborg\", slug: \"goteborg\" },\n  { name: \"Ajaccio\", slug: \"ajaccio\" },\n  { name: \"Harbin\", slug: \"harbin\" },\n  { name: \"Hamburg\", slug: \"hamburg\" },\n  { name: \"Toronto\", slug: \"toronto\" },\n  { name: \"Guangzhou\", slug: \"guangzhou\" },\n  { name: \"Conakry\", slug: \"conakry\" },\n  { name: \"Hyderabad\", slug: \"hyderabad\" },\n  { name: \"Jaipur\", slug: \"jaipur\" },\n  { name: \"Lima\", slug: \"lima\" },\n  { name: \"Phnom Penh\", slug: \"phnom-penh\" },\n  { name: \"Cali\", slug: \"cali\" },\n  { name: \"Dhaka\", slug: \"dhaka\" },\n  { name: \"Ningbo\", slug: \"ningbo\" },\n  { name: \"Dalian\", slug: \"dalian\" },\n  { name: \"Suzhou\", slug: \"suzhou\" },\n  { name: \"Belgrade\", slug: \"belgrade\" },\n  { name: \"Daegu\", slug: \"daegu\" },\n  { name: \"Kyoto\", slug: \"kyoto\" },\n  { name: \"Basra\", slug: \"basra\" },\n  { name: \"Romania\", slug: \"romania\" },\n  { name: \"Sofia\", slug: \"sofia\" },\n  { name: \"Ukraine\", slug: \"ukraine\" },\n  { name: \"Hefei\", slug: \"hefei\" },\n  { name: \"Chicago\", slug: \"chicago\" },\n  { name: \"Sydney\", slug: \"sydney\" },\n  { name: \"Abu Dhabi\", slug: \"abu-dhabi\" },\n  { name: \"Paris\", slug: \"paris\" },\n  { name: \"Tabriz\", slug: \"tabriz\" },\n  { name: \"Moscow\", slug: \"moscow\" },\n  { name: \"Baghdad\", slug: \"baghdad\" },\n  { name: \"Dallas\", slug: \"dallas\" },\n  { name: \"Kampala\", slug: \"kampala\" },\n  { name: \"Jeddah\", slug: \"jeddah\" },\n  { name: \"Chengdu\", slug: \"chengdu\" },\n  { name: \"Patna\", slug: \"patna\" },\n  { name: \"Shiraz\", slug: \"shiraz\" },\n  { name: \"Hong Kong\", slug: \"hong-kong\" },\n  { name: \"Ahvaz\", slug: \"ahvaz\" },\n  { name: \"Caloocan\", slug: \"caloocan\" },\n  { name: \"Suwałki\", slug: \"suwalki\" },\n  { name: \"Aalen\", slug: \"aalen\" },\n  { name: \"Porto\", slug: \"porto\" },\n  { name: \"Ahmedabad\", slug: \"ahmedabad\" },\n  { name: \"Budapest\", slug: \"budapest\" },\n  { name: \"Paris\", slug: \"paris\" },\n  { name: \"Viterbo\", slug: \"viterbo\" },\n  { name: \"New York\", slug: \"new-york\" },\n];\n\nshuffle(locations);\n\nexport const getFirstLocation = () => locations[0];\nexport const getLocationBySlug = (slug) => {\n  if (!slug) return { name: null, slug: null };\n  const location = locations.find((location) => location.slug === slug);\n  if (location) return location;\n  return { name: null, slug };\n};\nexport const getNextLocation = (slug) => {\n  const index = locations.findIndex((location) => location.slug === slug);\n  if (index >= 0 && index < locations.length - 1) return locations[index + 1];\n  return locations[0];\n};\n","export const shuffle = (array) => {\n  for (var i = array.length - 1; i > 0; i--) {\n    var j = Math.floor(Math.random() * (i + 1));\n    var temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n};\n","import { useState, useEffect } from \"react\";\n\nimport { getCity } from \"../../api\";\nimport {\n  getFirstLocation,\n  getLocationBySlug,\n  getNextLocation,\n} from \"../../utils/locations\";\n\nconst cache = {};\n\nconst getCached = (slug) => cache[slug || \"home\"];\nconst setCached = (slug, result) => (cache[slug || \"home\"] = result);\n\nconst useCity = (slug) => {\n  const [status, setStatus] = useState(\"loading\");\n  const [city, setCity] = useState(null);\n  const [nextCity, setNextCity] = useState(getFirstLocation());\n  useEffect(() => {\n    const load = async () => {\n      const currentLocation = getLocationBySlug(slug);\n      setStatus(\"loading\");\n      try {\n        let result = getCached(currentLocation.slug);\n        if (!result) {\n          result = await getCity(currentLocation.slug);\n          result.shortName = currentLocation.name;\n          setCached(currentLocation.slug, result);\n        }\n        setCity(result);\n        setStatus(\"loaded\");\n      } catch (e) {\n        setStatus(\"error\");\n      }\n    };\n\n    load();\n    if (slug) {\n      setNextCity(getNextLocation(slug));\n    }\n  }, [slug]);\n\n  return {\n    status,\n    isHome: !slug,\n    city,\n    nextCity,\n  };\n};\n\nexport default useCity;\n","import React, { useState } from \"react\";\nimport { useRoute } from \"wouter\";\n\nimport Webcam from \"../Webcam\";\nimport UI from \"../UI\";\nimport Canvas from \"../Canvas\";\n\nimport useCity from \"./useCity\";\n\nfunction City() {\n  const [, params] = useRoute(\"/:city\");\n  const [showWebcam, setShowWebcam] = useState(false);\n  const { status, city, nextCity, isHome } = useCity(params && params.city);\n\n  return (\n    <div>\n      {showWebcam && <Webcam />}\n      <Canvas status={status} city={city} />\n      <UI\n        status={status}\n        city={city}\n        isHome={isHome}\n        nextCity={nextCity}\n        setShowWebcam={setShowWebcam}\n      />\n    </div>\n  );\n}\n\nexport default City;\n","import React from \"react\";\nimport { Switch, Route, Router } from \"wouter\";\n\nimport Manifest from \"./components/Manifest\";\nimport City from \"./components/City\";\n\nfunction App() {\n  return (\n    <div id=\"app\">\n      <Router base=\"/whatwebreathe\">\n        <Switch>\n          <Route path=\"/manifest\">\n            <Manifest />\n          </Route>\n          <Route>\n            <City />\n          </Route>\n        </Switch>\n      </Router>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = (onPerfEntry) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}