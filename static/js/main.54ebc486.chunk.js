(this.webpackJsonpwhatwebreathe=this.webpackJsonpwhatwebreathe||[]).push([[0],{12:function(e,a,n){e.exports={ui:"UI_ui__138_5",header:"UI_header__14pMo",main:"UI_main__2vn9Z",info:"UI_info__cpCR_",action:"UI_action__2YYGX",homeLink:"UI_homeLink__1YuRp",worldLink:"UI_worldLink__PPCET"}},23:function(e,a,n){e.exports={webcam:"Webcam_webcam__5zdMj"}},26:function(e,a,n){e.exports={canvas:"Canvas_canvas__1txVP"}},30:function(e,a,n){},35:function(e,a,n){"use strict";n.r(a);var t=n(0),s=n.n(t),r=n(22),i=n.n(r),c=(n(30),n(2)),o=n(6),u=n.p+"static/media/positive.18c91dd5.jpeg",l=n.p+"static/media/negative.32cf9969.jpeg",m=n(7),h=n.n(m),g=n(1);var d=function(){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:h.a.topBar,children:[Object(g.jsxs)("h1",{className:h.a.brand,children:["WhatWeBreathe",Object(g.jsx)("br",{}),"Plotting PMx around you"]}),Object(g.jsxs)(o.a,{href:"/",className:h.a.link,children:["Back ",Object(g.jsx)("span",{children:"\u2192"})]})]}),Object(g.jsxs)("div",{className:h.a.manifesto,children:[Object(g.jsx)("p",{className:h.a.paragraph,children:"\u200dAccording to WHO, around 7 million people die every year due to a subtle and invisible killer: pollution. Exposure to particles such as fine dust can lead to stroke, heart disease, lung cancer and other respiratory infection. It is supposed, analyzing infection rates in polluted areas, that these particles have facilitated the spread of the new Coronavirus (SARS-CoV-2)."}),Object(g.jsxs)("div",{className:h.a.row,children:[Object(g.jsxs)("div",{className:h.a.col6,children:[Object(g.jsx)("img",{className:h.a.image,src:u,alt:"good WWB"}),Object(g.jsx)("div",{children:":-)"})]}),Object(g.jsxs)("div",{className:h.a.col6,alt:"no good WWB",children:[Object(g.jsx)("img",{className:h.a.image,src:l,alt:"no good WWB"}),Object(g.jsx)("div",{children:":-("})]})]}),Object(g.jsx)("p",{className:h.a.paragraph,children:"WhatWeBreath is a React-based project made to raise awareness on fine dust pollution: have you ever wondered what it would be like if these particles were visible? We tried to give an answer."}),Object(g.jsxs)(o.a,{href:"/",className:h.a.link,children:["by Polar Coffee ",Object(g.jsx)("span",{children:"\u2192"})]})]})]})},b=n(8),j=n.n(b),f=n(11),p=n(23),v=n.n(p);var x=function(){var e=Object(t.useRef)();return Object(t.useEffect)((function(){var a;return function(){var n=Object(f.a)(j.a.mark((function n(){var t;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!navigator.mediaDevices){n.next=7;break}return n.next=4,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 4:t=n.sent,a=t,e.current.srcObject=t;case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}()(),function(){a&&a.getTracks().forEach((function(e){e.stop()}))}}),[]),Object(g.jsx)("video",{className:v.a.webcam,ref:e,autoPlay:!0})},O=function(e){var a=e.text,n=void 0===a?"Loading":a,s=Object(t.useState)(0),r=Object(c.a)(s,2),i=r[0],o=r[1];return Object(t.useEffect)((function(){var e=setInterval((function(){o((function(e){return 3===e?0:e+1}))}),500);return function(){return clearInterval(e)}}),[]),"".concat(n).concat(Array(i+1).join("."))},k=n(12),y=n.n(k),w=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("loading"===e)return Object(g.jsx)(O,{});if("error"===e)return"Oops.. not found!";var n=a.shortName||a.name||"";return n.split(",")[0]},_=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="loaded"===e?a.particles:null;return"".concat(n||"???"," \u2014 pm25")};var M=function(e){var a=e.status,n=e.city,t=e.nextCity,s=e.isHome;return e.setShowWebcam,Object(g.jsxs)("div",{className:y.a.ui,children:[Object(g.jsxs)("header",{className:y.a.header,children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"WhatWeBreathe"}),Object(g.jsx)("h2",{children:"Plotting PMx around you"})]}),Object(g.jsx)("div",{children:Object(g.jsx)(o.a,{href:"/manifest",children:"Manifesto \u2192"})})]}),Object(g.jsxs)("main",{className:y.a.main,children:[Object(g.jsxs)("div",{className:y.a.info,children:[Object(g.jsx)("h1",{children:w(a,n)}),Object(g.jsx)("div",{children:_(a,n)})]}),Object(g.jsx)("div",{className:y.a.action,children:Object(g.jsxs)(o.a,{disabled:"loading"===a,href:s?"/".concat(t.slug):"/",children:[s?"Rest of the world":"Back home"," ",Object(g.jsx)("span",{className:s?y.a.homeLink:y.a.worldLink,children:"\u2192"})]})})]})]})},N=n(20);function z(e){var a=e.particle,n=Object(t.useRef)();return Object(N.b)((function(e,t){if(n.current){var s=e.clock.getElapsedTime();n.current.rotation.x=n.current.rotation.y+=.01,n.current.position.x+=.01*Math.cos(s+a.key),n.current.position.y+=.01*Math.sin(1.1*s+a.key),n.current.position.z+=.01*Math.sin(.9*s+a.key)}})),Object(g.jsxs)("mesh",{position:[a.x,a.y,a.z],ref:n,children:[Object(g.jsx)("sphereBufferGeometry",{args:[a.size,32,32]}),Object(g.jsx)("meshStandardMaterial",{color:"#25ff00",opacity:.05,trasparent:!0})]})}var C=function(e){var a=e.particles,n=void 0===a?[]:a;return Object(g.jsx)("group",{children:n.map((function(e){return Object(g.jsx)(z,{particle:e},e.key)}))})},B=n(26),S=n.n(B);var L=function(e){e.status;var a=e.city,n=Object(t.useState)([]),s=Object(c.a)(n,2),r=s[0],i=s[1];return Object(t.useEffect)((function(){a&&i(function(e){for(var a=[],n=0;n<e;n+=1)a.push({key:n,size:.1*Math.random()+.1,x:10*Math.random()-5,y:10*Math.random()-5,z:10*Math.random()-5});return a}(a.particles))}),[a]),Object(g.jsx)("div",{className:S.a.canvas,children:Object(g.jsxs)(N.a,{children:[Object(g.jsx)("ambientLight",{color:"#999"}),Object(g.jsx)("pointLight",{position:[10,10,10],color:"#999"}),Object(g.jsx)(C,{particles:r})]})})},P=n(3),W="e7416f21983d8cd887bbe33feee25d71fc3a214f",E=function(e){var a="";switch(!0){case e<50:a="good";break;case e<100:a="Moderate";break;case e<150:a="Unhealthy for sersitive groups";break;case e<200:a="Unhealthy";break;case e<300:a="Very unhealthy";break;case e>301:a="Hazardous";break;default:a=""}return{label:a,particles:Math.min(e,400)}},I=function(){var e=Object(f.a)(j.a.mark((function e(a){var n,t,s,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a?"https://api.waqi.info/feed/".concat(a,"/?token=").concat(W):"https://api.waqi.info/feed/here/?token=".concat(W),e.next=3,fetch(n);case 3:return t=e.sent,e.next=6,t.json();case 6:return s=e.sent,r=s.data&&s.data.city&&s.data.city.name,i=s.data&&s.data.iaqi&&s.data.iaqi.pm25&&s.data.iaqi.pm25.v,e.abrupt("return",Object(P.a)({name:r},E(i)));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),T=[{name:"Toronto",slug:"toronto"},{name:"Mumbai",slug:"mumbai"},{name:"Roma",slug:"roma"},{name:"Bormio",slug:"bormio"},{name:"Moscow",slug:"moscow"},{name:"Tatebayashi",slug:"tatebayashi"},{name:"Shenzhen",slug:"shenzhen"},{name:"Toronto",slug:"toronto"},{name:"Foshan",slug:"foshan"},{name:"\u0130zmir",slug:"izmir"},{name:"Edirne",slug:"edirne"},{name:"Lahore",slug:"lahore"},{name:"Nagoya",slug:"nagoya"},{name:"Dongguan",slug:"dongguan"},{name:"Jakarta",slug:"jakarta"},{name:"Kawasaki",slug:"kawasaki"},{name:"Attard, Malta",slug:"attard"},{name:"Miami",slug:"miami"},{name:"Salvador",slug:"salvador"},{name:"Tokyo",slug:"tokyo"},{name:"Qom",slug:"qom"},{name:"Berkeley",slug:"berkeley"},{name:"Cremona",slug:"cremona"},{name:"S\xe3o Paulo",slug:"sao-paulo"},{name:"Santiago",slug:"santiago"},{name:"Xiamen",slug:"xiamen"},{name:"Punta Arenas",slug:"punta-arenas"},{name:"Kanpur",slug:"kanpur"},{name:"Hanoi",slug:"hanoi"},{name:"Columbia",slug:"columbia"},{name:"Abuja",slug:"abuja"},{name:"Bangkok",slug:"bangkok"},{name:"Warburton",slug:"warburton"},{name:"Blenheim",slug:"blenheim"},{name:"Calgary",slug:"calgary"},{name:"Peshawar",slug:"peshawar"},{name:"Pune",slug:"pune"},{name:"Hiroshima",slug:"hiroshima"},{name:"Buenos Aires",slug:"buenos-aires"},{name:"Beroun",slug:"beroun"},{name:"Warsaw",slug:"warsaw"},{name:"Lagos",slug:"lagos"},{name:"Beroun",slug:"beroun"},{name:"Cape Town",slug:"cape-town"},{name:"Chennai",slug:"chennai"},{name:"Mexico City",slug:"mexico City"},{name:"Medellin",slug:"medellin"},{name:"Tangshan",slug:"tangshan"},{name:"Lanzhou",slug:"lanzhou"},{name:"Mumbai",slug:"mumbai"},{name:"Karachi",slug:"karachi"},{name:"Lucknow",slug:"lucknow"},{name:"Nanjing",slug:"nanjing"},{name:"Dubai",slug:"dubai"},{name:"G\xf6teborg",slug:"goteborg"},{name:"Ajaccio",slug:"ajaccio"},{name:"Harbin",slug:"harbin"},{name:"Hamburg",slug:"hamburg"},{name:"Toronto",slug:"toronto"},{name:"Guangzhou",slug:"guangzhou"},{name:"Conakry",slug:"conakry"},{name:"Hyderabad",slug:"hyderabad"},{name:"Jaipur",slug:"jaipur"},{name:"Lima",slug:"lima"},{name:"Artvin",slug:"artvin"},{name:"Cali",slug:"cali"},{name:"Dhaka",slug:"dhaka"},{name:"Ningbo",slug:"ningbo"},{name:"Dalian",slug:"dalian"},{name:"Suzhou",slug:"suzhou"},{name:"Belgrade",slug:"belgrade"},{name:"Daegu",slug:"daegu"},{name:"Kyoto",slug:"kyoto"},{name:"Quanzhou",slug:"quanzhou"},{name:"Manchester",slug:"manchester-piccadilly"},{name:"Milano",slug:"milano"},{name:"Ukraine",slug:"ukraine"},{name:"Hefei",slug:"hefei"},{name:"Chicago",slug:"chicago"},{name:"Sydney",slug:"sydney"},{name:"Washington",slug:"washington"},{name:"Paris",slug:"paris"},{name:"Tabriz",slug:"tabriz"},{name:"Moscow",slug:"moscow"},{name:"Baghdad",slug:"baghdad"},{name:"El Paso",slug:"el-paso"},{name:"Kampala",slug:"kampala"},{name:"Lushun",slug:"lushun"},{name:"Chengdu",slug:"chengdu"},{name:"Patna",slug:"patna"},{name:"Shiraz",slug:"shiraz"},{name:"Hong Kong",slug:"hong-kong"},{name:"Ahvaz",slug:"ahvaz"},{name:"Marmande",slug:"marmande"},{name:"Suwa\u0142ki",slug:"suwalki"},{name:"Aalen",slug:"aalen"},{name:"Porto",slug:"porto"},{name:"Ahmedabad",slug:"ahmedabad"},{name:"Budapest",slug:"budapest"},{name:"Paris",slug:"paris"},{name:"Viterbo",slug:"viterbo"},{name:"New York",slug:"new-york"}];!function(e){for(var a=e.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),t=e[a];e[a]=e[n],e[n]=t}}(T);var H=function(e){if(!e)return{name:null,slug:null,qs:null};var a=T.find((function(a){return a.slug===e}));return a?Object(P.a)(Object(P.a)({},a),{},{qs:a.name}):{name:null,slug:e,qs:e}},q={},A=function(e){return q[e||"home"]},U=function(e,a){return q[e||"home"]=a},D=function(e){var a=Object(t.useState)("loading"),n=Object(c.a)(a,2),s=n[0],r=n[1],i=Object(t.useState)(null),o=Object(c.a)(i,2),u=o[0],l=o[1],m=Object(t.useState)(T[0]),h=Object(c.a)(m,2),g=h[0],d=h[1];return Object(t.useEffect)((function(){(function(){var a=Object(f.a)(j.a.mark((function a(){var n,t;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=H(e),r("loading"),a.prev=2,t=A(n.slug)){a.next=10;break}return a.next=7,I(n.qs);case 7:(t=a.sent).shortName=n.name,U(n.slug,t);case 10:l(t),r("loaded"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(2),r("error");case 17:case"end":return a.stop()}}),a,null,[[2,14]])})));return function(){return a.apply(this,arguments)}})()(),e&&d(function(e){var a=T.findIndex((function(a){return a.slug===e}));return a>=0&&a<T.length-1?T[a+1]:T[0]}(e))}),[e]),{status:s,isHome:!e,city:u,nextCity:g}};var K=function(){var e=Object(o.e)("/:city"),a=Object(c.a)(e,2)[1],n=Object(t.useState)(!0),s=Object(c.a)(n,2),r=s[0],i=s[1],u=D(a&&a.city),l=u.status,m=u.city,h=u.nextCity,d=u.isHome;return Object(g.jsxs)("div",{children:[r&&Object(g.jsx)(x,{}),Object(g.jsx)(L,{status:l,city:m}),Object(g.jsx)(M,{status:l,city:m,isHome:d,nextCity:h,setShowWebcam:i})]})},R=function(){return window.location.hash.replace(/^#/,"")||"/"},F=function(e){return window.location.hash=e},G=function(){var e=Object(t.useState)(R()),a=Object(c.a)(e,2),n=a[0],s=a[1];return Object(t.useEffect)((function(){var e=function(){return s(R())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),[n,F]};var J=function(){return Object(g.jsx)("div",{id:"app",children:Object(g.jsx)(o.c,{hook:G,base:"/whatwebreathe",children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{path:"/manifest",children:Object(g.jsx)(d,{})}),Object(g.jsx)(o.b,{children:Object(g.jsx)(K,{})})]})})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(a){var n=a.getCLS,t=a.getFID,s=a.getFCP,r=a.getLCP,i=a.getTTFB;n(e),t(e),s(e),r(e),i(e)}))};i.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(J,{})}),document.getElementById("root")),V()},7:function(e,a,n){e.exports={topBar:"Manifest_topBar__KGyn0",brand:"Manifest_brand__1IZpN",link:"Manifest_link__122tJ",manifesto:"Manifest_manifesto__259C8",image:"Manifest_image__14KZh",row:"Manifest_row__3LLC5",col6:"Manifest_col6__-DqT3",paragraph:"Manifest_paragraph__S_40x"}}},[[35,1,2]]]);
//# sourceMappingURL=main.54ebc486.chunk.js.map