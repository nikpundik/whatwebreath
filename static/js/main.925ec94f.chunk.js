(this.webpackJsonpwhatwebreathe=this.webpackJsonpwhatwebreathe||[]).push([[0],{12:function(e,a,n){e.exports={ui:"UI_ui__138_5",header:"UI_header__14pMo",main:"UI_main__2vn9Z",info:"UI_info__cpCR_",action:"UI_action__2YYGX",homeLink:"UI_homeLink__1YuRp",worldLink:"UI_worldLink__PPCET"}},23:function(e,a,n){e.exports={webcam:"Webcam_webcam__5zdMj"}},24:function(e,a,n){e.exports={background:"Background_background__YQSqi"}},28:function(e,a,n){e.exports={canvas:"Canvas_canvas__1txVP"}},32:function(e,a,n){},37:function(e,a,n){"use strict";n.r(a);var t=n(0),s=n.n(t),r=n(22),i=n.n(r),c=(n(32),n(3)),o=n(6),u=n.p+"static/media/positive1.1d3c32d2.jpg",l=n.p+"static/media/negative1.c2609c9d.jpg",m=n(7),d=n.n(m),g=n(1);var h=function(){return Object(g.jsxs)("div",{children:[Object(g.jsxs)("div",{className:d.a.topBar,children:[Object(g.jsxs)("h1",{className:d.a.brand,children:["WhatWeBreathe",Object(g.jsx)("br",{}),"Plotting PM2.5 around you"]}),Object(g.jsxs)(o.a,{href:"/",className:d.a.link,children:["Back ",Object(g.jsx)("span",{children:"\u2192"})]})]}),Object(g.jsxs)("div",{className:d.a.manifesto,children:[Object(g.jsx)("p",{className:d.a.paragraph,children:"\u200dAccording to WHO, around 7 million people die every year due to a subtle and invisible killer: pollution. Exposure to particles such as fine dust can lead to stroke, heart disease, lung cancer and other respiratory infection. It is supposed, analyzing infection rates in polluted areas, that these particles have facilitated the spread of the new Coronavirus (SARS-CoV-2)."}),Object(g.jsxs)("div",{className:d.a.row,children:[Object(g.jsxs)("div",{className:d.a.col6,children:[Object(g.jsx)("img",{className:d.a.image,src:u,alt:"good WWB"}),Object(g.jsx)("div",{children:":-)"})]}),Object(g.jsxs)("div",{className:d.a.col6,alt:"no good WWB",children:[Object(g.jsx)("img",{className:d.a.image,src:l,alt:"no good WWB"}),Object(g.jsx)("div",{children:":-("})]})]}),Object(g.jsx)("p",{className:d.a.paragraph,children:"WhatWeBreath is a React-based project made to raise awareness on fine dust pollution: have you ever wondered what it would be like if these particles were visible? We tried to give an answer."}),Object(g.jsxs)(o.a,{href:"/",className:d.a.link,children:["by Polar Coffee ",Object(g.jsx)("span",{children:"\u2192"})]})]})]})},b=n(8),j=n.n(b),f=n(11),p=n(23),v=n.n(p);var O=function(e){var a=e.setShowWebcam,n=Object(t.useRef)();return Object(t.useEffect)((function(){var e;return function(){var t=Object(f.a)(j.a.mark((function t(){var s;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!navigator.mediaDevices){t.next=9;break}return t.next=4,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 4:s=t.sent,e=s,n.current.srcObject=s,t.next=10;break;case 9:a(!1);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),a(!1);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}()(),function(){e&&e.getTracks().forEach((function(e){e.stop()}))}}),[a]),Object(g.jsx)("video",{className:v.a.webcam,ref:n,autoPlay:!0})},x=n.p+"static/media/person.706cc310.jpeg",k=n(24),w=n.n(k);var y=function(){return Object(g.jsx)("div",{className:w.a.background,children:Object(g.jsx)("img",{src:x,alt:"Person Background"})})},_=n(2),M=n(25),N=function(e){var a=e.text,n=void 0===a?"Loading":a,s=Object(t.useState)(0),r=Object(c.a)(s,2),i=r[0],o=r[1];return Object(t.useEffect)((function(){var e=setInterval((function(){o((function(e){return 3===e?0:e+1}))}),500);return function(){return clearInterval(e)}}),[]),"".concat(n).concat(Array(i+1).join("."))},S=n(12),z=n.n(S),B=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("loading"===e)return Object(g.jsx)(N,{});if("error"===e)return"Oops.. not found!";var n=a.shortName||a.name||"";return n.split(",")[0]},C=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="loaded"===e?a.particles:null;return"".concat(n||"???"," \u2014 pm2.5")};var L=function(e){var a=e.status,n=e.city,s=e.nextCity,r=e.isHome,i=Object(o.e)(),u=Object(c.a)(i,2)[1],l=r?"/".concat(s.slug):"/",m=Object(t.useCallback)((function(){return"loading"!==a&&u(l)}),[a,l,u]),d=Object(M.useSwipeable)({onSwipedLeft:m,onSwipedRight:m});return Object(g.jsxs)("div",Object(_.a)(Object(_.a)({},d),{},{className:z.a.ui,children:[Object(g.jsxs)("header",{className:z.a.header,children:[Object(g.jsxs)("div",{children:[Object(g.jsx)("h3",{children:"WhatWeBreathe"}),Object(g.jsx)("h2",{children:"Plotting PM2.5 around you"})]}),Object(g.jsx)("div",{children:Object(g.jsx)(o.a,{href:"/manifest",children:"Manifesto \u2192"})})]}),Object(g.jsxs)("main",{className:z.a.main,children:[Object(g.jsxs)("div",{className:z.a.info,children:[Object(g.jsx)("h1",{children:B(a,n)}),Object(g.jsx)("div",{children:C(a,n)})]}),Object(g.jsx)("div",{className:z.a.action,children:Object(g.jsxs)(o.a,{disabled:"loading"===a,href:l,children:[r?"Rest of the world":"Back home"," ",Object(g.jsx)("span",{className:r?z.a.homeLink:z.a.worldLink,children:"\u2192"})]})})]})]}))},P=n(20);function W(e){var a=e.particle,n=Object(t.useRef)();return Object(P.b)((function(e,t){if(n.current){var s=e.clock.getElapsedTime();n.current.rotation.x=n.current.rotation.y+=.01,n.current.position.x+=.01*Math.cos(s+a.key),n.current.position.y+=.01*Math.sin(1.1*s+a.key),n.current.position.z+=.01*Math.sin(.9*s+a.key)}})),Object(g.jsxs)("mesh",{position:[a.x,a.y,a.z],ref:n,children:[Object(g.jsx)("sphereBufferGeometry",{args:[a.size,32,32]}),Object(g.jsx)("meshStandardMaterial",{color:"#25ff00",opacity:.05,trasparent:!0})]})}var E=function(e){var a=e.particles,n=void 0===a?[]:a;return Object(g.jsx)("group",{children:n.map((function(e){return Object(g.jsx)(W,{particle:e},e.key)}))})},I=n(28),T=n.n(I);var q=function(e){e.status;var a=e.city,n=Object(t.useState)([]),s=Object(c.a)(n,2),r=s[0],i=s[1];return Object(t.useEffect)((function(){a&&i(function(e){for(var a=[],n=0;n<e;n+=1)a.push({key:n,size:.1*Math.random()+.1,x:10*Math.random()-5,y:10*Math.random()-5,z:10*Math.random()-5});return a}(a.particles))}),[a]),Object(g.jsx)("div",{className:T.a.canvas,children:Object(g.jsxs)(P.a,{children:[Object(g.jsx)("ambientLight",{color:"#999"}),Object(g.jsx)("pointLight",{position:[10,10,10],color:"#999"}),Object(g.jsx)(E,{particles:r})]})})},H="e7416f21983d8cd887bbe33feee25d71fc3a214f",A=function(e){var a="";switch(!0){case e<50:a="good";break;case e<100:a="Moderate";break;case e<150:a="Unhealthy for sersitive groups";break;case e<200:a="Unhealthy";break;case e<300:a="Very unhealthy";break;case e>301:a="Hazardous";break;default:a=""}return{label:a,particles:Math.min(e,400)}},U=function(){var e=Object(f.a)(j.a.mark((function e(a){var n,t,s,r,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a?"https://api.waqi.info/feed/".concat(a,"/?token=").concat(H):"https://api.waqi.info/feed/here/?token=".concat(H),e.next=3,fetch(n);case 3:return t=e.sent,e.next=6,t.json();case 6:return s=e.sent,r=s.data&&s.data.city&&s.data.city.name,i=s.data&&s.data.iaqi&&s.data.iaqi.pm25&&s.data.iaqi.pm25.v,e.abrupt("return",Object(_.a)({name:r},A(i)));case 10:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),D=[{name:"Toronto",slug:"toronto"},{name:"Mumbai",slug:"mumbai"},{name:"Roma",slug:"roma"},{name:"Trondheim",slug:"trondheim"},{name:"Moscow",slug:"moscow"},{name:"Tatebayashi",slug:"tatebayashi"},{name:"Shenzhen",slug:"shenzhen"},{name:"Toronto",slug:"toronto"},{name:"Foshan",slug:"foshan"},{name:"\u0130zmir",slug:"izmir"},{name:"Edirne",slug:"edirne"},{name:"Lahore",slug:"lahore"},{name:"Nagoya",slug:"nagoya"},{name:"Dongguan",slug:"dongguan"},{name:"Jakarta",slug:"jakarta"},{name:"Kawasaki",slug:"kawasaki"},{name:"Attard, Malta",slug:"attard"},{name:"Miami",slug:"miami"},{name:"Salvador",slug:"salvador"},{name:"Tokyo",slug:"tokyo"},{name:"Qom",slug:"qom"},{name:"Berkeley",slug:"berkeley"},{name:"Cremona",slug:"cremona"},{name:"S\xe3o Paulo",slug:"sao-paulo"},{name:"Santiago",slug:"santiago"},{name:"Xiamen",slug:"xiamen"},{name:"Punta Arenas",slug:"punta-arenas"},{name:"Kanpur",slug:"kanpur"},{name:"Hanoi",slug:"hanoi"},{name:"Columbia",slug:"columbia"},{name:"Abuja",slug:"abuja"},{name:"Bangkok",slug:"bangkok"},{name:"Warburton",slug:"warburton"},{name:"Blenheim",slug:"blenheim"},{name:"Calgary",slug:"calgary"},{name:"Peshawar",slug:"peshawar"},{name:"Pune",slug:"pune"},{name:"Hiroshima",slug:"hiroshima"},{name:"Buenos Aires",slug:"buenos-aires"},{name:"Beroun",slug:"beroun"},{name:"Warsaw",slug:"warsaw"},{name:"Lagos",slug:"lagos"},{name:"Beroun",slug:"beroun"},{name:"Cape Town",slug:"cape-town"},{name:"Chennai",slug:"chennai"},{name:"Mexico City",slug:"mexico-city"},{name:"Medellin",slug:"medellin"},{name:"Tangshan",slug:"tangshan"},{name:"Lanzhou",slug:"lanzhou"},{name:"Mumbai",slug:"mumbai"},{name:"Karachi",slug:"karachi"},{name:"Lucknow",slug:"lucknow"},{name:"Nanjing",slug:"nanjing"},{name:"Dubai",slug:"dubai"},{name:"G\xf6teborg",slug:"goteborg"},{name:"Ajaccio",slug:"ajaccio"},{name:"Harbin",slug:"harbin"},{name:"Hamburg",slug:"hamburg"},{name:"Pasadena",slug:"pasadena"},{name:"Guangzhou",slug:"guangzhou"},{name:"Conakry",slug:"conakry"},{name:"Hyderabad",slug:"hyderabad"},{name:"Jaipur",slug:"jaipur"},{name:"Lima",slug:"lima"},{name:"Artvin",slug:"artvin"},{name:"Linares",slug:"linares"},{name:"Dhaka",slug:"dhaka"},{name:"Ningbo",slug:"ningbo"},{name:"Dalian",slug:"dalian"},{name:"Suzhou",slug:"suzhou"},{name:"Belgrade",slug:"belgrade"},{name:"Daegu",slug:"daegu"},{name:"Kyoto",slug:"kyoto"},{name:"Quanzhou",slug:"quanzhou"},{name:"Manchester",slug:"manchester-piccadilly"},{name:"Milano",slug:"milano"},{name:"Ukraine",slug:"ukraine"},{name:"Hefei",slug:"hefei"},{name:"Chicago",slug:"chicago"},{name:"Sydney",slug:"sydney"},{name:"Washington",slug:"washington"},{name:"Paris",slug:"paris"},{name:"Tabriz",slug:"tabriz"},{name:"Moscow",slug:"moscow"},{name:"Baghdad",slug:"baghdad"},{name:"El Paso",slug:"el-paso"},{name:"Kampala",slug:"kampala"},{name:"Lushun",slug:"lushun"},{name:"Chengdu",slug:"chengdu"},{name:"Patna",slug:"patna"},{name:"Shiraz",slug:"shiraz"},{name:"Hong Kong",slug:"hong-kong"},{name:"Ahvaz",slug:"ahvaz"},{name:"Marmande",slug:"marmande"},{name:"Suwa\u0142ki",slug:"suwalki"},{name:"Aalen",slug:"aalen"},{name:"Porto",slug:"porto"},{name:"Ahmedabad",slug:"ahmedabad"},{name:"Budapest",slug:"budapest"},{name:"Paris",slug:"paris"},{name:"Viterbo",slug:"viterbo"},{name:"New York",slug:"new-york"}];!function(e){for(var a=e.length-1;a>0;a--){var n=Math.floor(Math.random()*(a+1)),t=e[a];e[a]=e[n],e[n]=t}}(D);var R=function(e){if(!e)return{name:null,slug:null,qs:null};var a=D.find((function(a){return a.slug===e}));return a?Object(_.a)(Object(_.a)({},a),{},{qs:a.name}):{name:null,slug:e,qs:e}},K={},F=function(e){return K[e||"home"]},G=function(e,a){return K[e||"home"]=a},J=function(e){var a=Object(t.useState)("loading"),n=Object(c.a)(a,2),s=n[0],r=n[1],i=Object(t.useState)(null),o=Object(c.a)(i,2),u=o[0],l=o[1],m=Object(t.useState)(D[0]),d=Object(c.a)(m,2),g=d[0],h=d[1];return Object(t.useEffect)((function(){(function(){var a=Object(f.a)(j.a.mark((function a(){var n,t;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(n=R(e),r("loading"),a.prev=2,t=F(n.slug)){a.next=10;break}return a.next=7,U(n.qs);case 7:(t=a.sent).shortName=n.name,G(n.slug,t);case 10:l(t),r("loaded"),a.next=17;break;case 14:a.prev=14,a.t0=a.catch(2),r("error");case 17:case"end":return a.stop()}}),a,null,[[2,14]])})));return function(){return a.apply(this,arguments)}})()(),e&&h(function(e){var a=D.findIndex((function(a){return a.slug===e}));return a>=0&&a<D.length-1?D[a+1]:D[0]}(e))}),[e]),{status:s,isHome:!e,city:u,nextCity:g}};var Y=function(){var e=Object(o.f)("/:city"),a=Object(c.a)(e,2)[1],n=Object(t.useState)(!0),s=Object(c.a)(n,2),r=s[0],i=s[1],u=J(a&&a.city),l=u.status,m=u.city,d=u.nextCity,h=u.isHome;return Object(g.jsxs)("div",{children:[r?Object(g.jsx)(O,{setShowWebcam:i}):Object(g.jsx)(y,{}),Object(g.jsx)(q,{status:l,city:m}),Object(g.jsx)(L,{status:l,city:m,isHome:h,nextCity:d})]})},V=function(){return window.location.hash.replace(/^#/,"")||"/"},Q=function(e){return window.location.hash=e},Z=function(){var e=Object(t.useState)(V()),a=Object(c.a)(e,2),n=a[0],s=a[1];return Object(t.useEffect)((function(){var e=function(){return s(V())};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),[n,Q]};var X=function(){return Object(g.jsx)("div",{id:"app",children:Object(g.jsx)(o.c,{hook:Z,base:"/whatwebreathe",children:Object(g.jsxs)(o.d,{children:[Object(g.jsx)(o.b,{path:"/manifest",children:Object(g.jsx)(h,{})}),Object(g.jsx)(o.b,{children:Object(g.jsx)(Y,{})})]})})})},$=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(a){var n=a.getCLS,t=a.getFID,s=a.getFCP,r=a.getLCP,i=a.getTTFB;n(e),t(e),s(e),r(e),i(e)}))};i.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(X,{})}),document.getElementById("root")),$()},7:function(e,a,n){e.exports={topBar:"Manifest_topBar__KGyn0",brand:"Manifest_brand__1IZpN",link:"Manifest_link__122tJ",manifesto:"Manifest_manifesto__259C8",image:"Manifest_image__14KZh",row:"Manifest_row__3LLC5",col6:"Manifest_col6__-DqT3",paragraph:"Manifest_paragraph__S_40x"}}},[[37,1,2]]]);
//# sourceMappingURL=main.925ec94f.chunk.js.map