(this.webpackJsonpwhatwebreathe=this.webpackJsonpwhatwebreathe||[]).push([[0],{21:function(a,e,n){a.exports={manifest:"Manifest_manifest__dZ4UK"}},22:function(a,e,n){a.exports={webcam:"Webcam_webcam__5zdMj"}},23:function(a,e,n){a.exports={copy:"UI_copy__3kZZM"}},26:function(a,e,n){a.exports={canvas:"Canvas_canvas__1txVP"}},30:function(a,e,n){},35:function(a,e,n){"use strict";n.r(e);var t=n(0),s=n.n(t),r=n(20),u=n.n(r),o=(n(30),n(7)),c=n(21),i=n.n(c),l=n(1);var m=function(){return Object(l.jsxs)("div",{className:i.a.manifest,children:[Object(l.jsx)("h1",{children:"hell yeah"}),Object(l.jsx)(o.a,{href:"/",children:"back"})]})},g=n(3),h=n(6),b=n.n(h),d=n(10),j=n(22),f=n.n(j);var p=function(){var a=Object(t.useRef)();return Object(t.useEffect)((function(){var e;return function(){var n=Object(d.a)(b.a.mark((function n(){var t;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!navigator.mediaDevices){n.next=7;break}return n.next=4,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 4:t=n.sent,e=t,a.current.srcObject=t;case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}()(),function(){e&&e.getTracks().forEach((function(a){a.stop()}))}}),[]),Object(l.jsx)("video",{className:f.a.webcam,ref:a,autoPlay:!0})},x=n(23),y=n.n(x),v=function(a){var e=a.city,n=a.nextCity,t=a.isHome,r=a.setShowWebcam;return Object(l.jsxs)(s.a.Fragment,{children:[Object(l.jsx)(o.a,{href:"/manifest",children:"manifest"}),Object(l.jsx)("button",{onClick:function(){return r((function(a){return!a}))},children:"webcam"}),Object(l.jsx)(o.a,{href:t?"/".concat(n.slug):"/",children:t?"Rest of the world":"Back home"}),Object(l.jsx)("h1",{children:e.shortName||e.name})]})};var O=function(a){var e=a.status,n=a.city,t=a.nextCity,s=a.isHome,r=a.setShowWebcam;return Object(l.jsxs)("div",{className:y.a.copy,children:["loading"===e&&Object(l.jsx)("div",{children:"loader"}),"error"===e&&Object(l.jsx)("div",{children:"Ops...something went wrong"}),"loaded"===e&&Object(l.jsx)(v,{city:n,nextCity:t,isHome:s,setShowWebcam:r})]})},k=n(18);function w(a){var e=a.particle,n=Object(t.useRef)();return Object(k.b)((function(a,t){if(n.current){var s=a.clock.getElapsedTime();n.current.rotation.x=n.current.rotation.y+=.01,n.current.position.x+=.01*Math.cos(s+e.key),n.current.position.y+=.01*Math.sin(1.1*s+e.key),n.current.position.z+=.01*Math.sin(.9*s+e.key)}})),Object(l.jsxs)("mesh",{position:[e.x,e.y,e.z],ref:n,children:[Object(l.jsx)("sphereBufferGeometry",{args:[e.size,32,32]}),Object(l.jsx)("meshStandardMaterial",{color:"#34eb3d",opacity:.05,trasparent:!0})]})}var M=function(a){var e=a.particles,n=void 0===e?[]:e;return Object(l.jsx)("group",{children:n.map((function(a){return Object(l.jsx)(w,{particle:a},a.key)}))})},z=n(26),C=n.n(z);var S=function(a){a.status;var e=a.city,n=Object(t.useState)([]),s=Object(g.a)(n,2),r=s[0],u=s[1];return Object(t.useEffect)((function(){e&&u(function(a){for(var e=[],n=0;n<a;n+=1)e.push({key:n,size:.1*Math.random()+.1,x:10*Math.random()-5,y:10*Math.random()-5,z:10*Math.random()-5});return e}(e.particles))}),[e]),Object(l.jsx)("div",{className:C.a.canvas,children:Object(l.jsxs)(k.a,{children:[Object(l.jsx)("ambientLight",{color:"#999"}),Object(l.jsx)("pointLight",{position:[10,10,10],color:"#999"}),Object(l.jsx)(M,{particles:r})]})})},B=n(2),H="e7416f21983d8cd887bbe33feee25d71fc3a214f",P=function(a){var e="";switch(!0){case a<50:e="good";break;case a<100:e="Moderate";break;case a<150:e="Unhealthy for sersitive groups";break;case a<200:e="Unhealthy";break;case a<300:e="Very unhealthy";break;case a>301:e="Hazardous";break;default:e=""}return{label:e,particles:Math.min(a,400)}},T=function(){var a=Object(d.a)(b.a.mark((function a(e){var n,t,s,r,u;return b.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e?"https://api.waqi.info/feed/".concat(e,"/?token=").concat(H):"https://api.waqi.info/feed/here/?token=".concat(H),a.next=3,fetch(n);case 3:return t=a.sent,a.next=6,t.json();case 6:return s=a.sent,r=s.data&&s.data.city&&s.data.city.name,u=s.data&&s.data.iaqi&&s.data.iaqi.pm25&&s.data.iaqi.pm25.v,a.abrupt("return",Object(B.a)({name:r},P(u)));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),_=[{name:"Toronto",slug:"toronto"},{name:"Mumbai",slug:"mumbai"},{name:"Roma",slug:"roma"},{name:"Barcelona",slug:"barcelona"},{name:"Moscow",slug:"moscow"},{name:"Tatebayashi",slug:"tatebayashi"},{name:"Shenzhen",slug:"shenzhen"},{name:"Toronto",slug:"toronto"},{name:"Foshan",slug:"foshan"},{name:"\u0130zmir",slug:"izmir"},{name:"Edirne",slug:"edirne"},{name:"Lahore",slug:"lahore"},{name:"Nagoya",slug:"nagoya"},{name:"Dongguan",slug:"dongguan"},{name:"Jakarta",slug:"jakarta"},{name:"Kawasaki",slug:"kawasaki"},{name:"Attard, Malta",slug:"attard"},{name:"C\xf3rdoba",slug:"cordoba"},{name:"Salvador",slug:"salvador"},{name:"Tokyo",slug:"tokyo"},{name:"Qom",slug:"qom"},{name:"Berkeley",slug:"berkeley"},{name:"Munich",slug:"munich"},{name:"S\xe3o Paulo",slug:"sao-paulo"},{name:"Santiago",slug:"santiago"},{name:"Xiamen",slug:"xiamen"},{name:"Punta Arenas",slug:"punta-arenas"},{name:"Kanpur",slug:"kanpur"},{name:"Hanoi",slug:"hanoi"},{name:"Columbia",slug:"columbia"},{name:"Abuja",slug:"abuja"},{name:"Bangkok",slug:"bangkok"},{name:"Warburton",slug:"warburton"},{name:"Blenheim",slug:"blenheim"},{name:"Calgary",slug:"calgary"},{name:"Peshawar",slug:"peshawar"},{name:"Pune",slug:"pune"},{name:"Hiroshima",slug:"hiroshima"},{name:"Buenos Aires",slug:"buenos-aires"},{name:"Beroun",slug:"beroun"},{name:"Warsaw",slug:"warsaw"},{name:"Lagos",slug:"lagos"},{name:"Beroun",slug:"beroun"},{name:"Cape Town",slug:"cape-town"},{name:"Chennai",slug:"chennai"},{name:"Mexico City",slug:"mexico City"},{name:"Medellin",slug:"medellin"},{name:"Tangshan",slug:"tangshan"},{name:"Lanzhou",slug:"lanzhou"},{name:"Mumbai",slug:"mumbai"},{name:"Karachi",slug:"karachi"},{name:"Lucknow",slug:"lucknow"},{name:"Nanjing",slug:"nanjing"},{name:"Dubai",slug:"dubai"},{name:"G\xf6teborg",slug:"goteborg"},{name:"Ajaccio",slug:"ajaccio"},{name:"Harbin",slug:"harbin"},{name:"Hamburg",slug:"hamburg"},{name:"Toronto",slug:"toronto"},{name:"Guangzhou",slug:"guangzhou"},{name:"Conakry",slug:"conakry"},{name:"Hyderabad",slug:"hyderabad"},{name:"Jaipur",slug:"jaipur"},{name:"Lima",slug:"lima"},{name:"Phnom Penh",slug:"phnom-penh"},{name:"Cali",slug:"cali"},{name:"Dhaka",slug:"dhaka"},{name:"Ningbo",slug:"ningbo"},{name:"Dalian",slug:"dalian"},{name:"Suzhou",slug:"suzhou"},{name:"Belgrade",slug:"belgrade"},{name:"Daegu",slug:"daegu"},{name:"Kyoto",slug:"kyoto"},{name:"Basra",slug:"basra"},{name:"Romania",slug:"romania"},{name:"Sofia",slug:"sofia"},{name:"Ukraine",slug:"ukraine"},{name:"Hefei",slug:"hefei"},{name:"Chicago",slug:"chicago"},{name:"Sydney",slug:"sydney"},{name:"Abu Dhabi",slug:"abu-dhabi"},{name:"Paris",slug:"paris"},{name:"Tabriz",slug:"tabriz"},{name:"Moscow",slug:"moscow"},{name:"Baghdad",slug:"baghdad"},{name:"Dallas",slug:"dallas"},{name:"Kampala",slug:"kampala"},{name:"Jeddah",slug:"jeddah"},{name:"Chengdu",slug:"chengdu"},{name:"Patna",slug:"patna"},{name:"Shiraz",slug:"shiraz"},{name:"Hong Kong",slug:"hong-kong"},{name:"Ahvaz",slug:"ahvaz"},{name:"Caloocan",slug:"caloocan"},{name:"Suwa\u0142ki",slug:"suwalki"},{name:"Aalen",slug:"aalen"},{name:"Porto",slug:"porto"},{name:"Ahmedabad",slug:"ahmedabad"},{name:"Budapest",slug:"budapest"},{name:"Paris",slug:"paris"},{name:"Viterbo",slug:"viterbo"},{name:"New York",slug:"new-york"}];!function(a){for(var e=a.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),t=a[e];a[e]=a[n],a[n]=t}}(_);var D=function(a){if(!a)return{name:null,slug:null};var e=_.find((function(e){return e.slug===a}));return e||{name:null,slug:a}},N={},A=function(a){return N[a||"home"]},L=function(a,e){return N[a||"home"]=e},E=function(a){var e=Object(t.useState)("loading"),n=Object(g.a)(e,2),s=n[0],r=n[1],u=Object(t.useState)(null),o=Object(g.a)(u,2),c=o[0],i=o[1],l=Object(t.useState)(_[0]),m=Object(g.a)(l,2),h=m[0],j=m[1];return Object(t.useEffect)((function(){(function(){var e=Object(d.a)(b.a.mark((function e(){var n,t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=D(a),r("loading"),e.prev=2,t=A(n.slug)){e.next=10;break}return e.next=7,T(n.slug);case 7:(t=e.sent).shortName=n.name,L(n.slug,t);case 10:i(t),r("loaded"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r("error");case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()(),a&&j(function(a){var e=_.findIndex((function(e){return e.slug===a}));return e>=0&&e<_.length-1?_[e+1]:_[0]}(a))}),[a]),{status:s,isHome:!a,city:c,nextCity:h}};var K=function(){var a=Object(o.d)("/:city"),e=Object(g.a)(a,2)[1],n=Object(t.useState)(!1),s=Object(g.a)(n,2),r=s[0],u=s[1],c=E(e&&e.city),i=c.status,m=c.city,h=c.nextCity,b=c.isHome;return Object(l.jsxs)("div",{children:[r&&Object(l.jsx)(p,{}),Object(l.jsx)(S,{status:i,city:m}),Object(l.jsx)(O,{status:i,city:m,isHome:b,nextCity:h,setShowWebcam:u})]})};var W=function(){return Object(l.jsx)("div",{id:"app",children:Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.b,{path:"/manifest",children:Object(l.jsx)(m,{})}),Object(l.jsx)(o.b,{children:Object(l.jsx)(K,{})})]})})},q=function(a){a&&a instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(e){var n=e.getCLS,t=e.getFID,s=e.getFCP,r=e.getLCP,u=e.getTTFB;n(a),t(a),s(a),r(a),u(a)}))};u.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(W,{})}),document.getElementById("root")),q()}},[[35,1,2]]]);
//# sourceMappingURL=main.defb1035.chunk.js.map