(this.webpackJsonpwhatwebreathe=this.webpackJsonpwhatwebreathe||[]).push([[0],{12:function(a,e,n){a.exports={ui:"UI_ui__138_5",header:"UI_header__14pMo",main:"UI_main__2vn9Z",info:"UI_info__cpCR_",action:"UI_action__2YYGX",homeLink:"UI_homeLink__1YuRp",worldLink:"UI_worldLink__PPCET"}},23:function(a,e,n){a.exports={webcam:"Webcam_webcam__5zdMj"}},26:function(a,e,n){a.exports={canvas:"Canvas_canvas__1txVP"}},30:function(a,e,n){},35:function(a,e,n){"use strict";n.r(e);var t=n(0),s=n.n(t),r=n(22),i=n.n(r),c=(n(30),n(6)),o=n(7),u=n.n(o),l=n(1);var m=function(){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:u.a.topBar,children:[Object(l.jsxs)("h1",{className:u.a.brand,children:["WhatWeBreathe",Object(l.jsx)("br",{}),"Plotting PMx around you"]}),Object(l.jsxs)(c.a,{href:"/",className:u.a.link,children:["Back ",Object(l.jsx)("span",{children:"\u2192"})]})]}),Object(l.jsxs)("div",{className:u.a.manifesto,children:[Object(l.jsx)("p",{className:u.a.paragraph,children:"\u200dAccording to WHO, around 7 million people die every year due to a subtle and invisible killer: pollution. Exposure to particles such as fine dust can lead to stroke, heart disease, lung cancer and other respiratory infection. It is supposed, analyzing infection rates in polluted areas, that these particles have facilitated the spread of the new Coronavirus (SARS-CoV-2)."}),Object(l.jsxs)("div",{className:u.a.row,children:[Object(l.jsxs)("div",{className:u.a.col6,children:[Object(l.jsx)("img",{className:u.a.image,src:"https://uploads-ssl.webflow.com/6054be9e3328955c76eebcb8/6054c52a7ac7ad5b8855f0c3_positive-p-1080.jpeg",alt:"good WWB"}),Object(l.jsx)("div",{children:":-)"})]}),Object(l.jsxs)("div",{className:u.a.col6,alt:"no good WWB",children:[Object(l.jsx)("img",{className:u.a.image,src:"https://uploads-ssl.webflow.com/6054be9e3328955c76eebcb8/6054c5445e16ba2e49fac051_negative-p-2000.jpeg",alt:"no good WWB"}),Object(l.jsx)("div",{children:":-("})]})]}),Object(l.jsx)("p",{className:u.a.paragraph,children:"WhatWeBreath is a React-based project made to raise awareness on fine dust pollution: have you ever wondered what it would be like if these particles were visible? We tried to give an answer."}),Object(l.jsxs)(c.a,{href:"/",className:u.a.link,children:["by Polar Coffee ",Object(l.jsx)("span",{children:"\u2192"})]})]})]})},g=n(3),h=n(8),d=n.n(h),b=n(11),j=n(23),f=n.n(j);var p=function(){var a=Object(t.useRef)();return Object(t.useEffect)((function(){var e;return function(){var n=Object(b.a)(d.a.mark((function n(){var t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!navigator.mediaDevices){n.next=7;break}return n.next=4,navigator.mediaDevices.getUserMedia({video:!0,audio:!1});case 4:t=n.sent,e=t,a.current.srcObject=t;case 7:n.next=11;break;case 9:n.prev=9,n.t0=n.catch(0);case 11:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(){return n.apply(this,arguments)}}()(),function(){e&&e.getTracks().forEach((function(a){a.stop()}))}}),[]),Object(l.jsx)("video",{className:f.a.webcam,ref:a,autoPlay:!0})},v=function(a){var e=a.text,n=void 0===e?"Loading":e,s=Object(t.useState)(0),r=Object(g.a)(s,2),i=r[0],c=r[1];return Object(t.useEffect)((function(){var a=setInterval((function(){c((function(a){return 3===a?0:a+1}))}),500);return function(){return clearInterval(a)}}),[]),"".concat(n).concat(Array(i+1).join("."))},x=n(12),O=n.n(x),k=function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("loading"===a)return Object(l.jsx)(v,{});if("error"===a)return"Oops.. not found!";var n=e.shortName||e.name||"";return n.split(",")[0]},y=function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="loaded"===a?e.particles:null;return"".concat(n||"???"," \u2014 pm25")};var w=function(a){var e=a.status,n=a.city,t=a.nextCity,s=a.isHome;return a.setShowWebcam,Object(l.jsxs)("div",{className:O.a.ui,children:[Object(l.jsxs)("header",{className:O.a.header,children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("h3",{children:"WhatWeBreathe"}),Object(l.jsx)("h2",{children:"Plotting PMx around you"})]}),Object(l.jsx)("div",{children:Object(l.jsx)(c.a,{href:"/manifest",children:"Manifesto \u2192"})})]}),Object(l.jsxs)("main",{className:O.a.main,children:[Object(l.jsxs)("div",{className:O.a.info,children:[Object(l.jsx)("h1",{children:k(e,n)}),Object(l.jsx)("div",{children:y(e,n)})]}),Object(l.jsx)("div",{className:O.a.action,children:Object(l.jsxs)(c.a,{disabled:"loading"===e,href:s?"/".concat(t.slug):"/",children:[s?"Rest of the world":"Back home"," ",Object(l.jsx)("span",{className:s?O.a.homeLink:O.a.worldLink,children:"\u2192"})]})})]})]})},_=n(20);function M(a){var e=a.particle,n=Object(t.useRef)();return Object(_.b)((function(a,t){if(n.current){var s=a.clock.getElapsedTime();n.current.rotation.x=n.current.rotation.y+=.01,n.current.position.x+=.01*Math.cos(s+e.key),n.current.position.y+=.01*Math.sin(1.1*s+e.key),n.current.position.z+=.01*Math.sin(.9*s+e.key)}})),Object(l.jsxs)("mesh",{position:[e.x,e.y,e.z],ref:n,children:[Object(l.jsx)("sphereBufferGeometry",{args:[e.size,32,32]}),Object(l.jsx)("meshStandardMaterial",{color:"#25ff00",opacity:.05,trasparent:!0})]})}var C=function(a){var e=a.particles,n=void 0===e?[]:e;return Object(l.jsx)("group",{children:n.map((function(a){return Object(l.jsx)(M,{particle:a},a.key)}))})},N=n(26),B=n.n(N);var z=function(a){a.status;var e=a.city,n=Object(t.useState)([]),s=Object(g.a)(n,2),r=s[0],i=s[1];return Object(t.useEffect)((function(){e&&i(function(a){for(var e=[],n=0;n<a;n+=1)e.push({key:n,size:.1*Math.random()+.1,x:10*Math.random()-5,y:10*Math.random()-5,z:10*Math.random()-5});return e}(e.particles))}),[e]),Object(l.jsx)("div",{className:B.a.canvas,children:Object(l.jsxs)(_.a,{children:[Object(l.jsx)("ambientLight",{color:"#999"}),Object(l.jsx)("pointLight",{position:[10,10,10],color:"#999"}),Object(l.jsx)(C,{particles:r})]})})},S=n(2),P="e7416f21983d8cd887bbe33feee25d71fc3a214f",W=function(a){var e="";switch(!0){case a<50:e="good";break;case a<100:e="Moderate";break;case a<150:e="Unhealthy for sersitive groups";break;case a<200:e="Unhealthy";break;case a<300:e="Very unhealthy";break;case a>301:e="Hazardous";break;default:e=""}return{label:e,particles:Math.min(a,400)}},L=function(){var a=Object(b.a)(d.a.mark((function a(e){var n,t,s,r,i;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=e?"https://api.waqi.info/feed/".concat(e,"/?token=").concat(P):"https://api.waqi.info/feed/here/?token=".concat(P),a.next=3,fetch(n);case 3:return t=a.sent,a.next=6,t.json();case 6:return s=a.sent,r=s.data&&s.data.city&&s.data.city.name,i=s.data&&s.data.iaqi&&s.data.iaqi.pm25&&s.data.iaqi.pm25.v,a.abrupt("return",Object(S.a)({name:r},W(i)));case 10:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),I=[{name:"Toronto",slug:"toronto"},{name:"Mumbai",slug:"mumbai"},{name:"Roma",slug:"roma"},{name:"Barcelona",slug:"barcelona"},{name:"Moscow",slug:"moscow"},{name:"Tatebayashi",slug:"tatebayashi"},{name:"Shenzhen",slug:"shenzhen"},{name:"Toronto",slug:"toronto"},{name:"Foshan",slug:"foshan"},{name:"\u0130zmir",slug:"izmir"},{name:"Edirne",slug:"edirne"},{name:"Lahore",slug:"lahore"},{name:"Nagoya",slug:"nagoya"},{name:"Dongguan",slug:"dongguan"},{name:"Jakarta",slug:"jakarta"},{name:"Kawasaki",slug:"kawasaki"},{name:"Attard, Malta",slug:"attard"},{name:"C\xf3rdoba",slug:"cordoba"},{name:"Salvador",slug:"salvador"},{name:"Tokyo",slug:"tokyo"},{name:"Qom",slug:"qom"},{name:"Berkeley",slug:"berkeley"},{name:"Munich",slug:"munich"},{name:"S\xe3o Paulo",slug:"sao-paulo"},{name:"Santiago",slug:"santiago"},{name:"Xiamen",slug:"xiamen"},{name:"Punta Arenas",slug:"punta-arenas"},{name:"Kanpur",slug:"kanpur"},{name:"Hanoi",slug:"hanoi"},{name:"Columbia",slug:"columbia"},{name:"Abuja",slug:"abuja"},{name:"Bangkok",slug:"bangkok"},{name:"Warburton",slug:"warburton"},{name:"Blenheim",slug:"blenheim"},{name:"Calgary",slug:"calgary"},{name:"Peshawar",slug:"peshawar"},{name:"Pune",slug:"pune"},{name:"Hiroshima",slug:"hiroshima"},{name:"Buenos Aires",slug:"buenos-aires"},{name:"Beroun",slug:"beroun"},{name:"Warsaw",slug:"warsaw"},{name:"Lagos",slug:"lagos"},{name:"Beroun",slug:"beroun"},{name:"Cape Town",slug:"cape-town"},{name:"Chennai",slug:"chennai"},{name:"Mexico City",slug:"mexico City"},{name:"Medellin",slug:"medellin"},{name:"Tangshan",slug:"tangshan"},{name:"Lanzhou",slug:"lanzhou"},{name:"Mumbai",slug:"mumbai"},{name:"Karachi",slug:"karachi"},{name:"Lucknow",slug:"lucknow"},{name:"Nanjing",slug:"nanjing"},{name:"Dubai",slug:"dubai"},{name:"G\xf6teborg",slug:"goteborg"},{name:"Ajaccio",slug:"ajaccio"},{name:"Harbin",slug:"harbin"},{name:"Hamburg",slug:"hamburg"},{name:"Toronto",slug:"toronto"},{name:"Guangzhou",slug:"guangzhou"},{name:"Conakry",slug:"conakry"},{name:"Hyderabad",slug:"hyderabad"},{name:"Jaipur",slug:"jaipur"},{name:"Lima",slug:"lima"},{name:"Phnom Penh",slug:"phnom-penh"},{name:"Cali",slug:"cali"},{name:"Dhaka",slug:"dhaka"},{name:"Ningbo",slug:"ningbo"},{name:"Dalian",slug:"dalian"},{name:"Suzhou",slug:"suzhou"},{name:"Belgrade",slug:"belgrade"},{name:"Daegu",slug:"daegu"},{name:"Kyoto",slug:"kyoto"},{name:"Basra",slug:"basra"},{name:"Romania",slug:"romania"},{name:"Sofia",slug:"sofia"},{name:"Ukraine",slug:"ukraine"},{name:"Hefei",slug:"hefei"},{name:"Chicago",slug:"chicago"},{name:"Sydney",slug:"sydney"},{name:"Abu Dhabi",slug:"abu-dhabi"},{name:"Paris",slug:"paris"},{name:"Tabriz",slug:"tabriz"},{name:"Moscow",slug:"moscow"},{name:"Baghdad",slug:"baghdad"},{name:"Dallas",slug:"dallas"},{name:"Kampala",slug:"kampala"},{name:"Jeddah",slug:"jeddah"},{name:"Chengdu",slug:"chengdu"},{name:"Patna",slug:"patna"},{name:"Shiraz",slug:"shiraz"},{name:"Hong Kong",slug:"hong-kong"},{name:"Ahvaz",slug:"ahvaz"},{name:"Caloocan",slug:"caloocan"},{name:"Suwa\u0142ki",slug:"suwalki"},{name:"Aalen",slug:"aalen"},{name:"Porto",slug:"porto"},{name:"Ahmedabad",slug:"ahmedabad"},{name:"Budapest",slug:"budapest"},{name:"Paris",slug:"paris"},{name:"Viterbo",slug:"viterbo"},{name:"New York",slug:"new-york"}];!function(a){for(var e=a.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),t=a[e];a[e]=a[n],a[n]=t}}(I);var T=function(a){if(!a)return{name:null,slug:null,qs:null};var e=I.find((function(e){return e.slug===a}));return e?Object(S.a)(Object(S.a)({},e),{},{qs:e.name}):{name:null,slug:a,qs:a}},H={},A=function(a){return H[a||"home"]},q=function(a,e){return H[a||"home"]=e},D=function(a){var e=Object(t.useState)("loading"),n=Object(g.a)(e,2),s=n[0],r=n[1],i=Object(t.useState)(null),c=Object(g.a)(i,2),o=c[0],u=c[1],l=Object(t.useState)(I[0]),m=Object(g.a)(l,2),h=m[0],j=m[1];return Object(t.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var n,t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=T(a),r("loading"),e.prev=2,t=A(n.slug)){e.next=10;break}return e.next=7,L(n.qs);case 7:(t=e.sent).shortName=n.name,q(n.slug,t);case 10:u(t),r("loaded"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r("error");case 17:case"end":return e.stop()}}),e,null,[[2,14]])})));return function(){return e.apply(this,arguments)}})()(),a&&j(function(a){var e=I.findIndex((function(e){return e.slug===a}));return e>=0&&e<I.length-1?I[e+1]:I[0]}(a))}),[a]),{status:s,isHome:!a,city:o,nextCity:h}};var U=function(){var a=Object(c.e)("/:city"),e=Object(g.a)(a,2)[1],n=Object(t.useState)(!0),s=Object(g.a)(n,2),r=s[0],i=s[1],o=D(e&&e.city),u=o.status,m=o.city,h=o.nextCity,d=o.isHome;return Object(l.jsxs)("div",{children:[r&&Object(l.jsx)(p,{}),Object(l.jsx)(z,{status:u,city:m}),Object(l.jsx)(w,{status:u,city:m,isHome:d,nextCity:h,setShowWebcam:i})]})};var E=function(){return Object(l.jsx)("div",{id:"app",children:Object(l.jsx)(c.c,{base:"/whatwebreathe",children:Object(l.jsxs)(c.d,{children:[Object(l.jsx)(c.b,{path:"/manifest",children:Object(l.jsx)(m,{})}),Object(l.jsx)(c.b,{children:Object(l.jsx)(U,{})})]})})})},R=function(a){a&&a instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(e){var n=e.getCLS,t=e.getFID,s=e.getFCP,r=e.getLCP,i=e.getTTFB;n(a),t(a),s(a),r(a),i(a)}))};i.a.render(Object(l.jsx)(s.a.StrictMode,{children:Object(l.jsx)(E,{})}),document.getElementById("root")),R()},7:function(a,e,n){a.exports={topBar:"Manifest_topBar__KGyn0",brand:"Manifest_brand__1IZpN",link:"Manifest_link__122tJ",manifesto:"Manifest_manifesto__259C8",image:"Manifest_image__14KZh",row:"Manifest_row__3LLC5",col6:"Manifest_col6__-DqT3",paragraph:"Manifest_paragraph__S_40x"}}},[[35,1,2]]]);
//# sourceMappingURL=main.e0099beb.chunk.js.map